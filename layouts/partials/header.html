{{ if .Params.banner }}

    {{ $imageResource := ($.Site.GetPage "section" "uploads").Resources.GetMatch (strings.TrimPrefix "/uploads/" .Params.banner) }}

    {{ if .IsHome }}
        {{ $sectionPages := where .Site.RegularPages "Type" "osa-ii" }}
        {{ range first 1 $sectionPages }}
            {{ $imageResource = ($.Site.GetPage "section" "uploads").Resources.GetMatch (strings.TrimPrefix "/uploads/" .Params.banner) }}
        {{ end }}
    {{ end }}

    {{ $resizedHero2560 := $imageResource.Resize "2560x q90 webp"}}
    {{ $resizedHero1920 := $imageResource.Resize "1920x q90 webp"}}
    {{ $resizedHero1280 := $imageResource.Resize "1280x q90 webp"}}
    {{ $resizedHero768 := $imageResource.Resize "768x q90 webp"}}
    {{ $resizedHero512 := $imageResource.Resize "512x q90 webp"}}

    <header>
        <nav>
            {{ if .Params.useNavHeadline }}
                <h1 class="nav-title">
                    <a href="/" class="nav-title">Mies Lännestä</a>
                </h1>
            {{ else }}
                <a href="/" class="nav-title">Mies Lännestä</a>
            {{end}}
        </nav>
        <a href="{{$imageResource.RelPermalink}}" aria-label="Täysikokoinen kuva">
            <img class="hero"
             src="{{ $resizedHero512.RelPermalink }}"
             srcset="{{ $resizedHero512.RelPermalink }} 512w,
                     {{ $resizedHero768.RelPermalink }} 768w,
                     {{ $resizedHero1280.RelPermalink }} 1280w,
                     {{ $resizedHero1920.RelPermalink }} 1920w,
                     {{ $resizedHero2560.RelPermalink }} 2560w"
             aria-hidden="true"
             alt="">
        </a>
        {{ if not .Params.useNavHeadline }}
            <div class="title-container">
                <h1 class="main-title">{{ .Title }}</h1>
                {{ if .Params.date }}
                    <p class="main-subtitle">
                        <strong>
                            {{ .Date.Format "2006/01/02"}}
                        </strong>
                    </p>
                {{ else }}
                    <p class="main-subtitle-small">
                        <strong>
                            {{ .Params.subtitle }}
                        </strong>
                    </p>
                {{ end }}
            </div>
        {{ end }}
    </header>
{{ end }}